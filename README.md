
# Сервис сокращения URL

Это простой сервис для сокращения URL, реализованный на C++ с использованием библиотеки Boost.Beast для обработки HTTP-запросов и JSON для работы с данными. Сервис позволяет пользователям сокращать URL и переходить по коротким ссылкам, получая перенаправление на соответствующий исходный URL.

## Возможности

- Сокращение предоставленного URL и получение его короткой версии.
- Перенаправление с короткого URL на исходный.
- Хранение данных в текстовом файле.

## Требования

- C++17
- Boost (system, beast)
- jsoncpp (для работы с JSON)
- CMake (для сборки проекта)
- Компилятор GCC или совместимый C++ компилятор

### Зависимости

- **Boost**: Используется для сетевого взаимодействия и обработки HTTP.
- **jsoncpp**: Используется для парсинга и генерации JSON.

## Установка

### 1.Клонирование репозитория:

- git clone https://github.com/denisd1241/url_shortener.git
- cd url_shortener

### 2.Установка зависимостей: 
```bash
sudo apt-get install libboost-all-dev libjsoncpp-dev
```
### 3.Сборка проекта: 
Используйте CMake для сборки проекта. Выполните следующие команды:
```bash
mkdir build
cd build
cmake ..
make
```

## Использование
#### Начало
Для работы с данным HTTP-сервисом сокращения URL нужно использовать два терминала. Один терминал будет использоваться для запуска сервера, который будет принимать входящие запросы и выполнять перенаправления, а второй терминал — для отправки запросов к серверу, чтобы создать короткие ссылки и использовать их.

Команда для запуска сервера
```bash
./url_shortener 127.0.0.1 8080 urls.txt
```
#### Сокращение URL
Чтобы сократить URL, отправьте POST-запрос на /shorten с телом JSON, содержащим оригинальный URL. Пример запроса с использованием curl:
```bash
curl -X POST http://127.0.0.1:8080/shorten -H "Content-Type: application/json" -d '{"url": "https://www.google.com"}'
```
Ответ будет содержать короткий URL в формате JSON:
```json
{
  "short_url": "http://127.0.0.1:8080/<сгенерированный url>"
}
```
#### Перенаправление

Для перенаправления по короткому URL просто отправьте GET-запрос на адрес короткого URL. Например:
```bash
curl -i http://127.0.0.1:8080/<сгенерированный url>
```
Ответ:
```bash
HTTP/1.1 301 Moved Permanently
Location: http://google.com
```
Вы будете перенаправлены на оригинальный URL, который был связан с коротким.

### Ошибки

#### Ошибки при сокращении URL

-   **400 Bad Request**: Если в теле запроса отсутствует поле `url`.
    
	   Пример ответа:

	```json
	{
		"error" : "Field 'url' is required"
	}
	```
#### Ошибки при перенаправлении

-   **404 Not Found**: Если короткий URL не найден в системе.
    
    Пример ответа:

	```json
	{
		"error" : "URL not found"
	}
	```

